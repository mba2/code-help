function StartUp(n){$(document).ready(n.run)}var Log={success:[],addSuccess:function(n,e){var t={};t.response=n,t.status="ajax call successfully",t.address=e,Log.success.push(t)},errors:[],addError:function(n,e,t){var a={};a.status=n,a.description=e,a.address=t,Log.errors.push(a)}},Search={query:function(n){n.preventDefault();var e=$("#search_form"),t=e.find("input[name='lang[]']:checked"),a=[],o=e.find("#search_field").val(),s="./helpers/search-syntax.php";t.each(function(){a.push($(this).val())}),$.ajax({url:s,type:"post",data:{lang:a,string:o},success:function(n,e,t){Log.addSuccess(n,s),Search.loadResult(n)},error:function(n,e,t){Log.addError(e,t,s)}})},loadResult:function(n){if(currentJSON=JSON.parse(n),currentJSON.hasOwnProperty("status")){var e=currentJSON.status,t=currentJSON.msg,a=$(".alert_area"),o=$("<p/>").addClass("my_alert");return o.addClass(function(){return"no language selected"==e||"no string passed"==e?"error":"warning"}),a.html(o.text(t)),!1}a=$(".alert_area").empty();var s=currentJSON.length,r=$(".results_table tbody");r.empty();for(var c=0;c<s;c++){var d=$("<td/>").addClass("lang_description").text(currentJSON[c].languageDesc),l=$("<td/>").addClass("syntax_desc").text(currentJSON[c].syntaxDesc),i=$("<td/>").addClass("syntax_body").text(currentJSON[c].syntaxBody),u=$("<td/>").addClass("syntax_notes").text(currentJSON[c].syntaxNotes),x=$("<tr/>").addClass("syntax_row").attr("data-id",currentJSON[c].syntaxID).append(d,l,i,u);r.append(x),console.log(currentJSON[c])}$("#show_hide_nav_btn").prop("checked",!1)}},Navigation={toggleLangs:function(n){var e=$("#search_form");"select_all_btn"===$(n.target).attr("id")?e.find(".lang_option_input").prop("checked",!0):e.find(".lang_option_input").prop("checked",!1)}},Page={createOverlay:function(n){var e=$("#overlay").length?$("#overlay"):$("<div id='overlay'>                                                                                       <span class='close_btn'>X</span>                                                                                       <div class='my_modal'></div>                                                                                    </div>");$("main").append(e),e.on("click",Page.removeOverlay),$("body").on("keyup",Page.removeOverlay)},removeOverlay:function(n){var e=$(n.target);(e.is("#overlay")||e.is(".close_btn"))&&$("main").find("#overlay").remove(),27==n.which&&$("main").find("#overlay").remove(),$(".overlay").off("click",Page.removeOverlay),$("body").off("keyup",Page.removeOverlay)},contextMenu:{open:function(){if($("#context_menu").length)return n=$("#context_menu");var n=$("<div id='context_menu' class='context_menu'>                                                                <span id='open_syntax_menu_context_btn' class='context_menu_btn'>Open</span>                                                                <span id='remove_syntax_menu_context_btn' class='context_menu_btn'>Remove</span>                                                              </div>");return n},close:function(){$("#context_menu").remove()}},clicks:{run:function(){$(document).click(function(n){var e=$(n.target);e.is(".context_menu_btn")||Page.contextMenu.close(),console.log(e)}),console.log("All clicks at (document) are handled over here!!")}}},Syntax={openNewWindow:function(){Page.createOverlay();$(".my_modal").load("./includes/new-syntax.html")},newSyntax:{example:{add:function(){var n=$("#examples_area"),e="./includes/example.html";$.ajax({url:e,success:function(t,a,o){Log.addSuccess(t,e),n.append(t)},error:function(n,t,a){return Log.addError(t,a,e),!1}})},remove:function(){$node=$(this),$example=$node.parent().parent().remove()},save:function(){}}},saveSyntax:{new:function(n){n.preventDefault();var e=$(this).parent(),t=e.find("#syntax_lang_field").val(),a=e.find("#syntax_body_field").val(),o=e.find("#syntax_notes_field").val(),s=e.find("#syntax_desc_field").val(),r=[],c=($("#examples_area").find("div.example").each(function(){r.push($(this).find("textarea").val())}),"./helpers/save-syntax.php"),d={syntaxLang:t,syntaxBody:a,syntaxDesc:o,syntaxNotes:s,examples:r};console.log(r),$.ajax({url:c,data:d,type:"post",success:function(n){var e=$("#new_syntax_area").empty(),t=$("<button id='add_new_syntax_btn' class='add_new_syntax_btn'>Add New Syntax</button>"),a=$("</p>").addClass("my_alert");if("{"!=n[0]){t.text("Try Again"),a.addClass("error"),e.append(a.text("Sorry, syntax could not be saved on the database"),t);return Log.addError("error","There's something right before the JSON Object or there's no JSON Object at all",c),!1}var o=JSON.parse(n);"success"===o.status?a.addClass("warning"):"error"===o.status&&(t.text("Try Again"),a.addClass("error"),o.addInfo&&console.log(o.addInfo)),e.append(a.text(o.msg),t)}})}},editSyntax:{openSyntax:function(n){return $(this).addClass("selected_row"),$contextMenu=Page.contextMenu.open(),$("main").append($contextMenu.css({top:n.pageY,left:n.pageX})),$contextMenu},saveSyntax:function(n){}},removeSyntax:{options:function(){var n=$(event.target);if(n.is(".context_menu_btn")){var e=$("#context_menu");e.empty();var t=$("<div id='remove_confirmation_box' class='confirmation_box'>                                                                                                                             <p>Still wanna remove it?</p>                                                                                                                                                         <div>                                                                                                                                                                                   <button id='remove_syntax_menu_context_cancel_btn'  class='confirmation_btn'>Cancel</button>                                                                                          <button id='remove_syntax_menu_context_confirm_btn' class='confirmation_btn'>Remove</button>                                                                                        </div>                                                                                                                                                                              </div>");e.addClass("confirmation").html(t),console.log("Context menu REMOVING")}else n.is(".syntax_modal_btn")},confirm:function(){$(this);var n="helpers/remove-syntax.php",e={syntaxID:$("main").find(".selected_row").attr("data-id")};$.ajax({url:n,type:"post",data:e,success:function(t){Log.addSuccess(t,n),n="helpers/search-syntax.php",e={lastQuery:!0},$.ajax({url:n,type:"post",data:e,success:function(e){Search.loadResult(e),Log.addSuccess(e,n)}})},error:function(){}}),console.log("confirm exclusion")},cancel:function(n){$("#context_menu").removeClass("confirmation").html("<span id='open_syntax_menu_context_btn' class='context_menu_btn'>Open</span>                                                                   <span id='remove_syntax_menu_context_btn' class='context_menu_btn'>Remove</span>"),console.log("cancel")}},syntaxForms:{run:function(){var n=$("main"),e=n.find("#new_syntax_form");e.find("#add_example_btn"),e.find(".remove_example_btn");saveSyntax="#save_syntax_btn",$saveSyntax=e.find(saveSyntax),addNewSyntax="#add_new_syntax_btn",$addNewSyntax=e.find(addNewSyntax),n.on("click","#add_example_btn",Syntax.newSyntax.example.add),n.on("click",".remove_example_btn",Syntax.newSyntax.example.remove),n.on("click",saveSyntax,Syntax.saveSyntax.new),n.on("click",addNewSyntax,Syntax.openNewWindow),console.log("newSyntaxForm is running")}},syntaxResults:{run:function(){var n=$("main"),e=n.find("table");e.find("thead"),e.find("tbody").find("row");n.on("dblclick",".syntax_row",Syntax.editSyntax.openSyntax),n.on("click","#remove_syntax_menu_context_btn, #remove_syntax",Syntax.removeSyntax.options),n.on("click","#remove_syntax_menu_context_cancel_btn",Syntax.removeSyntax.cancel),n.on("click","#remove_syntax_menu_context_confirm_btn",Syntax.removeSyntax.confirm),console.log("syntaxResults is running")}}};StartUp(Syntax.syntaxForms),StartUp(Syntax.syntaxResults),StartUp(Page.clicks),$(document).ready(function(){$("main").on("click","#submit_search_btn",Search.query),$("main").on("click","#unselect_all_btn,#select_all_btn",Navigation.toggleLangs),$("main").on("click","#new_syntax_btn",Syntax.openNewWindow)});